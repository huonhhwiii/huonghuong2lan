ls
ls -a
ls
ls -a
sudo
sudo ls
ls -a
ls
ls -a
cd qtcsdl2
flask run
sudo apt update
sudo apt install docker.io
sudo systemctl enable docker
sudo systemctl start docker
docker --version
docker pull mysql:latest
sudo usermod -aG docker huong
docker pull mysql:latest
sudo docker pull mysql:latest
docker run --name mysql-container -e MYSQL_ROOT_PASSWORD=huong24052005 -p 3306:3306 -d mysql:latest
sudo docker run --name mysql-container -e MYSQL_ROOT_PASSWORD=huong24052005 -p 3306:3306 -d mysql:latest
docker exec -it mysql-container mysql -u root -p
sudo docker exec -it mysql-container mysql -u root -p
docker stop mysql-container
sudo docker stop mysql-container
sudo usermod -aG docker your-username
sudo usermod -aG docker huong
docker ps
sudo systemctl status mysql
sudo docker start mysql-container
sudo systemctl status mysql
sudo groupadd docker
newgrp docker
docker ps
docker stop mysql-container
docker ps
docker start mysql-container
docker exec -it mysql-container mysql -u root -p
docker stop mysql-server
docker stop mysql-container
docker ps
code schema.sql
docker start mysql-container
docker exec -it mysql-container mysql -u root -p
docker cp script.sql mysql-container:/schema.sql
docker cp schema.sql mysql-container:/schema.sql
docker exec -it mysql-container bash
mkdir insert
cd insert
code nhap.py
pip install mysql
pip install mysql --break-system-packages
pip install mysql-connector-python --break-system-packages
docker stop mysql-container
cd insert
python3 nhap.py
docker start mysql-container
python3 nhap.py
mkdir template
cd templates
code qlgs.html
cd ..
code app.py
flask run
docker stop mysql-container
docker ps
cd qtcsdl2
flask run
code help.py
unzip qtcsdl4
cd Quan_tri_csdl
docker start mysql-container
flask run
docker exec -it mysql-container mysql -u root -p
docker stop my sql-container
docker stop mysql-container
docker ps
code app.py
cd ..
mkdir pthttt
cd pthttt
mkdir templates
mkdir static
cd static
code style.css
cd ..
code main.py
cd ..
cd qtcsdl
docker start mysql-container
flask run
cd qtcsdl
docker start mysql-container
flask run
cd test
cd ..
code nhap.sql
docker start mysql-container
docker exec -it mysql-container mysql -u root -p
cd test
cd templates
code thembn
code thembn.html
code base.html
cd ..
cd static
code script.js
cd ..
code requirements.txt
python app.py
python3 app.py
flask run
cd test
docker ps
flask run
pip install -r requirements.txt
flask run
pip install python-dotenv
pip show python-dotenv
source venv/bin/activate  # Linux/Mac
pip install python-dotenv
pip show python-dotenv
sudo pip install python-dotenv
pip show python-dotenv
flask run
source venv/bin/activate
pip install python-dotenv
flask run
docker-compose build --no-cache
docker-compose up -d
docker exec -it your-container-name bash
pip list
flask run
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
cd ..
locale
sudo apt install language-pack-vi
sudo update-locale LANG=vi_VN.UTF-8 LANGUAGE=vi_VN LC_ALL=vi_VN.UTF-8
exit
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
locale
sudo update-locale LANG=vi_VN.UTF-8 LANGUAGE=vi_VN LC_ALL=vi_VN.UTF-8
locale
sudo update-locale LANG=vi_VN.UTF-8 LANGUAGE=vi_VN LC_ALL=vi_VN.UTF-8
exit
cd qtcsdl
docker start mysql-container
flask run
docer ps
flask run
docker stop mysql-container
locale
sudo apt install fonts-dejavu-core fonts-dejavu
locale
cd qtcsdl
docker exec -it msql-contanier mysql -u root -p

docker exec -it mysql-container mysql -u root -p
cd qtcsdl
docker start mysql-container
docker exec -it mysql-container mysql -u root -p
locale
export LANG=vi_VN.UTF-8
export LANGUAGE=vi_VN
export LC_ALL=vi_VN.UTF-8
locale
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
FLASK RUN
SELECT * FROM PHUHUYNH;
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
locale
export LANG=vi_VN.UTF-8
export LANGUAGE=vi_VN
export LC_ALL=vi_VN.UTF-8
locale
cd qtcsdl
flask run
FLASK RUN
flask run
docker stop mysql-mysqlcontainer
docker stop mysql-container
cd qtcsdl
code app.py
docker start mysql-container
flask run
code help.py
flask run
cd test
flask run
code index.html
python3 app.py
flask run
CREATE DATABASE benhnhan_db;
mysql -u root -p
(mkdir -p /home/huong/nhakhoaso/static /home/huong/nhakhoaso/templates) >> /tmp/7dac9585-4eb3-4094-a4ec-bcdd6f3d8553.log 2>&1
(mkdir -p /home/huong/nhakhoaso/static/images) >> /tmp/b6931429-f4fa-454a-9053-46014dc400b5.log 2>&1
(mkdir -p /home/huong/nhakhoaso/static/images) >> /tmp/69ce875c-8caa-4e10-b595-759d126451e9.log 2>&1
cd /home/huong/nhakhoaso
pip install -r requirements.txt
python app.py
python3 app.py
cd qtcsdl
docker start mysql-contaienr
docker ps
docker start mysql-container
flask run
dcker exec -it mysql-container mysql -u root -p
docker exec -it mysql-container mysql -u root -p
CD ..
cd ..
docker stop mysql-container
cd /home/huong/nhakhoaso
pip install -r requirements.txt
python3 app.py
cd nhakhoaso
python3 app.py
cd nhakhoaso
cd ..
cd nhakhoaso
python3 app.py
cd nhakhoaso
cd qtcsdl
cd nhakhoaso
cd ..
cd qtcsdl
flask run
cd ..
cd nhakhoaso
python init_database.py
pytho3n init_database.py
python3 init_database.py
python init_database.py
python3 init_database.py
(mkdir -p /home/huong/nhakhoaso/database) >> /tmp/46379ae4-cfc1-40b1-8a29-2961339cc61f.log 2>&1
(cd /home/huong/nhakhoaso && python app.py) >> /tmp/6fd5f00e-e876-4e20-8411-82def8e1dd31.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/634656c9-64d2-4628-baca-2d0c7ad055f2.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(port=5001, debug=True)") >> /tmp/cbb4caec-9e1a-425d-9786-a7f0dfcb2066.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/99689afa-efda-4203-9cd8-4a6f75ce483a.log 2>&1
(systemctl status mysql) >> /tmp/c2808c28-4809-4773-9612-ecd7c844cdf4.log 2>&1
(apt-get update && apt-get install -y mysql-server) >> /tmp/c5431a4b-9364-474b-9fb5-ce1201b6f900.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/94a6ad92-a391-46a1-b578-0b38a329a412.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(port=5001, debug=True)" &) >> /tmp/b0988f60-b27c-4333-9618-4eefda258c1c.log 2>&1
(curl http://localhost:5001/) >> /tmp/4bad5244-fe19-4c06-9466-f1415b498214.log 2>&1
(pkill -f "python3 -c") >> /tmp/556b655c-6e59-4349-a09b-a918c2ec14ae.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(port=5001, debug=True)" &) >> /tmp/081d698b-81c0-472d-ae7f-353ea8916b71.log 2>&1
(curl http://localhost:5001/) >> /tmp/5d04ca60-0b8c-4fa8-917b-014fd5bb301e.log 2>&1
(curl http://localhost:5001/benh-nhan) >> /tmp/b46d008a-ef6b-4c21-b0aa-cf6ecbcb124e.log 2>&1
(curl http://localhost:5001/benh-nhan/them-moi) >> /tmp/59be6ce7-7f7b-4e83-a541-666487d2a7f9.log 2>&1
(curl http://localhost:5001/benh-nhan/tim-kiem) >> /tmp/b98fb1b6-8d81-4add-94bb-af84bdbd20eb.log 2>&1
(curl http://localhost:5001/benh-nhan/chi-tiet/BN00001) >> /tmp/fb548b48-14ab-445a-800d-95ec70c58486.log 2>&1
(curl http://localhost:5001/benh-nhan/chinh-sua/BN00001) >> /tmp/cd4818e5-d490-4c95-9538-e40fc84eb662.log 2>&1
(curl -X DELETE http://localhost:5001/api/benh-nhan/BN00005) >> /tmp/39739cf9-8c7b-4182-99a4-95820d4d2548.log 2>&1
(curl http://localhost:5001/benh-nhan | grep -A 5 "BN00005") >> /tmp/dfde6cd3-c698-4dab-813e-ce4fdf067a59.log 2>&1
(pkill -f "python3 -c") >> /tmp/eecdb1d7-9afa-4b54-8468-a3191833026c.log 2>&1
cd nhakhoaso
python3 app.py
(which sqlite3) >> /tmp/e661349f-69d3-4f14-8f0b-b35a7bc0ce3f.log 2>&1
sqlite3
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db) >> /tmp/1303cf93-e548-4471-81a9-cc3fb6d6d776.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".tables") >> /tmp/a76c02ed-12cb-4398-b049-83ed1d439c5c.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema BENHNHAN") >> /tmp/c5597e77-4882-41bd-bfb9-ee7be3d54b64.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM BENHNHAN;") >> /tmp/415814da-c27c-4aa1-9cff-8852d753b1ed.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".mode column" ".headers on" "SELECT * FROM BENHNHAN;") >> /tmp/a2bf5c6b-6516-4aee-86af-1ab2388df6ec.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".mode column" ".headers on" "SELECT * FROM BENHNHAN WHERE HoTen LIKE '%Thị%';") >> /tmp/cd6f1a3e-9bb7-4d68-9ecd-7aa1869c2d47.log 2>&1
which sqlite3
sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db
cd /home/huong/nhakhoaso
python3 app.py
sqlite3
sqlite3 nhakhoaso.db
(sudo apt-get update && sudo apt-get install -y mysql-server) >> /tmp/428bdffe-f43b-4142-85a8-5b7145cb83f8.log 2>&1
(pip install mysql-connector-python Flask-MySQLdb) >> /tmp/0d4d00f0-db9c-4c8b-88a2-c59574d08746.log 2>&1
(python3 -m venv /home/huong/venv) >> /tmp/942786cb-c5f5-4846-8f19-0c55c85f39b4.log 2>&1
cd nhakhoaso
python3 app.py
cd nhakhoaso
.sqlite3
sqlite3 nhakhoaso.db
.open /home/huong/nhakhoaso/database/nhakhoaso.db
cd nhakhoaso
.open /home/huong/nhakhoaso/database/nhakhoaso.db
cd /home/huong/nhakhoaso/database
sqlite3 nhakhoaso.db
cd nhakhoaso
python3 app.py
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/8720e66d-2db4-429a-9ee2-cc5bf6f0800f.log 2>&1
(pip3 install --user flask mysql-connector-python) >> /tmp/6308d257-9bb7-4863-98ae-c91f08d4549c.log 2>&1
(apt list --installed | grep -E 'flask|mysql') >> /tmp/74de3437-6fd3-4ee6-bb20-d3358b0324ff.log 2>&1
(which mysql) >> /tmp/25e243ea-6016-4b6a-9934-281bfd3063ce.log 2>&1
(which docker) >> /tmp/6fded960-60b9-46a2-a782-b8c981b1da95.log 2>&1
cd nhakhoaso
python3 app.py
/usr/bin/python3 /home/huong/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/printEnvVariablesToFile.py /home/huong/.vscode-server/extensions/ms-python.python-2025.4.0-linux-x64/python_files/deactivate/bash/envVars.txt
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/93abb809-5143-4b8f-8bd6-8408423a287a.log 2>&1
(find /home/huong/nhakhoaso -name "init_database.py") >> /tmp/6e3cd72d-6ccb-48d0-ba0d-d868771467d2.log 2>&1
(cat /home/huong/nhakhoaso/init_database.py) >> /tmp/11d0e613-1fc1-49ff-8cb5-ea01c3c1f44f.log 2>&1
(rm /home/huong/nhakhoaso/init_database.py) >> /tmp/fc3fb0c5-a829-40b2-b71a-5b403b3b2a23.log 2>&1
(cd /home/huong/nhakhoaso && echo 'import sqlite3
import os
from config import DB_PATH

def init_database():
    """
    Khởi tạo cơ sở dữ liệu SQLite từ file SQL
    """
    try:
        # Đảm bảo thư mục tồn tại
        os.makedirs(os.path.dirname(DB_PATH), exist_ok=True)
        
        # Kết nối đến SQLite (sẽ tạo file nếu chưa tồn tại)
        connection = sqlite3.connect(DB_PATH)
        cursor = connection.cursor()
        
        # Đọc file SQL
        with open("database/init_db.sql", "r") as file:
            sql_script = file.read()
        
        # Thực thi từng câu lệnh SQL
        cursor.executescript(sql_script)
        
        connection.commit()
        print("Cơ sở dữ liệu đã được khởi tạo thành công!")
        
        cursor.close()
        connection.close()
            
    except sqlite3.Error as e:
        print(f"Lỗi khi khởi tạo cơ sở dữ liệu: {e}")

if __name__ == "__main__":
    init_database()' > init_database.py) >> /tmp/702b16d8-f608-4730-986e-b04ed85ecc9f.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/33d0a98a-5872-4a50-8b36-9ccd740c4763.log 2>&1
(cat /home/huong/nhakhoaso/config.py) >> /tmp/242914f9-ab53-4dc1-a19f-22315273543d.log 2>&1
(cd /home/huong/nhakhoaso && echo 'import os

# Đường dẫn đến file SQLite
DB_PATH = os.path.join(os.path.dirname(os.path.abspath(__file__)), "database", "nhakhoaso.db")' > config.py) >> /tmp/086dd087-052a-4cca-9476-6dd742bb950d.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/7841b0dc-b23c-4831-b4b6-fc1ae7b937b4.log 2>&1
(head -n 10 /home/huong/nhakhoaso/database/init_db.sql) >> /tmp/859bf056-e8c1-4f85-b70b-e4ca255f5b72.log 2>&1
(cd /home/huong/nhakhoaso && echo '-- Bảng BENHNHAN
CREATE TABLE IF NOT EXISTS BENHNHAN (
    MaBN CHAR(7) NOT NULL PRIMARY KEY, -- Mã bệnh nhân
    HoTen VARCHAR(100) NOT NULL, -- Họ tên bệnh nhân
    NgaySinh DATE NULL, -- Ngày sinh
    GioiTinh CHAR(10) NULL, -- Giới tính
    Sdt CHAR(10) NOT NULL -- Số điện thoại
);

-- Bảng BACSI
CREATE TABLE IF NOT EXISTS BACSI (
    MaBS CHAR(10) NOT NULL PRIMARY KEY, -- Mã bác sĩ
    HoTen VARCHAR(100) NOT NULL, -- Họ tên bác sĩ
    Sdt CHAR(10) NOT NULL -- Số điện thoại
);

-- Bảng DICHVU
CREATE TABLE IF NOT EXISTS DICHVU (
    MaDV CHAR(10) NOT NULL PRIMARY KEY, -- Mã dịch vụ
    TenDV VARCHAR(100) NOT NULL, -- Tên dịch vụ
    Gia DECIMAL(18,2) NULL -- Giá
);

-- Bảng LICHHEN
CREATE TABLE IF NOT EXISTS LICHHEN (
    MaLH CHAR(7) NOT NULL PRIMARY KEY, -- Mã lịch hẹn
    MaBN CHAR(7) NOT NULL, -- Mã bệnh nhân
    NgayHen DATETIME NOT NULL, -- Ngày hẹn khám
    TrangThai VARCHAR(50) NULL, -- Trạng thái
    FOREIGN KEY (MaBN) REFERENCES BENHNHAN(MaBN)
);

-- Bảng PHIEUKHAM
CREATE TABLE IF NOT EXISTS PHIEUKHAM (
    MaPK CHAR(10) NOT NULL PRIMARY KEY, -- Mã phiếu khám
    MaBN CHAR(7) NOT NULL, -- Mã bệnh nhân
    MaBS CHAR(10) NOT NULL, -- Mã bác sĩ
    MaDV CHAR(10) NOT NULL, -- Mã dịch vụ
    NgayKham DATETIME NULL, -- Ngày khám
    ChanDoan VARCHAR(255) NULL, -- Chẩn đoán
    GhiChu VARCHAR(255) NULL, -- Ghi chú
    FOREIGN KEY (MaBN) REFERENCES BENHNHAN(MaBN),
    FOREIGN KEY (MaBS) REFERENCES BACSI(MaBS),
    FOREIGN KEY (MaDV) REFERENCES DICHVU(MaDV)
);

-- Thêm dữ liệu mẫu cho bảng BENHNHAN
INSERT INTO BENHNHAN (MaBN, HoTen, NgaySinh, GioiTinh, Sdt) VALUES
("BN00001", "Nguyễn Thị Mai", "1992-03-10", "Nữ", "0901122334"),
("BN00002", "Trần Văn Hùng", "1985-11-22", "Nam", "0912233445"),
("BN00003", "Lê Hoàng Nam", "1990-06-15", "Nam", "0923344556"),
("BN00004", "Phạm Thị Hòa", "1996-01-30", "Nữ", "0934455667"),
("BN00005", "Hoàng Quốc Tuấn", "1988-08-08", "Nam", "0945566778");

-- Thêm dữ liệu mẫu cho bảng BACSI
INSERT INTO BACSI (MaBS, HoTen, Sdt) VALUES
("BS00000001", "Nguyễn Văn An", "0912345678"),
("BS00000002", "Trần Thị Bình", "0987654321"),
("BS00000003", "Lê Văn Cường", "0909090909"),
("BS00000004", "Phạm Thị Dung", "0934567890"),
("BS00000005", "Đỗ Văn Hải", "0945123456");

-- Thêm dữ liệu mẫu cho bảng DICHVU
INSERT INTO DICHVU (MaDV, TenDV, Gia) VALUES
("DV00000001", "Khám răng định kỳ", 150000),
("DV00000002", "Nhổ răng khôn", 500000),
("DV00000003", "Tẩy trắng răng", 700000),
("DV00000004", "Trám răng thẩm mỹ", 300000),
("DV00000005", "Niềng răng chỉnh nha", 25000000);

-- Thêm dữ liệu mẫu cho bảng LICHHEN
INSERT INTO LICHHEN (MaLH, MaBN, NgayHen, TrangThai) VALUES
("LH00001", "BN00001", "2025-04-20 09:00:00", "Chưa khám"),
("LH00002", "BN00002", "2025-04-21 10:00:00", "Đã khám"),
("LH00003", "BN00003", "2025-04-22 14:00:00", "Chưa khám"),
("LH00004", "BN00004", "2025-04-23 08:30:00", "Đã khám"),
("LH00005", "BN00005", "2025-04-24 13:30:00", "Chưa khám");

-- Thêm dữ liệu mẫu cho bảng PHIEUKHAM
INSERT INTO PHIEUKHAM (MaPK, MaBN, MaBS, MaDV, NgayKham, ChanDoan, GhiChu) VALUES
("PK00001", "BN00001", "BS00000001", "DV00000001", "2025-04-20 09:30:00", "Viêm nướu nhẹ", "Được tư vấn chăm sóc răng và khám định kỳ"),
("PK00002", "BN00002", "BS00000002", "DV00000002", "2025-04-21 10:30:00", "Răng khôn mọc lệch", "Đã nhổ răng khôn và kê thuốc giảm đau"),
("PK00003", "BN00003", "BS00000003", "DV00000003", "2025-04-22 14:30:00", "Răng ố vàng", "Thực hiện tẩy trắng răng theo yêu cầu"),
("PK00004", "BN00004", "BS00000004", "DV00000004", "2025-04-23 08:45:00", "Sâu răng nhẹ", "Trám răng thẩm mỹ để phục hồi hình dạng răng"),
("PK00005", "BN00005", "BS00000005", "DV00000005", "2025-04-24 13:45:00", "Răng mọc lệch", "Chỉ định niềng răng chỉnh nha trong 12 tháng");' > database/init_db.sql) >> /tmp/1e564169-23dc-424f-990b-ed7543a8c034.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/6b31fe21-83dd-4eb9-8df1-01de8882c480.log 2>&1
(rm -f /home/huong/nhakhoaso/database/nhakhoaso.db && cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/c211244c-3e1e-4ff3-a9be-77ec3af87467.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(port=5001, debug=True)" &) >> /tmp/19912804-f7c3-41c8-890f-aad0466124f2.log 2>&1
(sleep 2 && curl http://localhost:5001/) >> /tmp/640f768d-28fc-482e-bf5a-d0d122d468db.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/53618b23-cbba-4d00-bdb2-ffafe5b81b84.log 2>&1
(pip3 install --user flask) >> /tmp/1c2ad754-60e9-4d80-914f-183c1cd8fd4f.log 2>&1
(python3 -m flask --version) >> /tmp/6c1e1ff6-ef17-4295-9feb-c775140260db.log 2>&1
(cd /home/huong && python3 -m venv venv) >> /tmp/7ee99a4f-13ea-43d3-a03f-e77d2bd92ab3.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "import sys; print(sys.path)") >> /tmp/62ed096b-9104-484f-97c6-8d05d434352e.log 2>&1
(cd /home/huong && ls -la venv/lib/python3.12/site-packages) >> /tmp/f794cbe9-c6c4-48c7-9ee4-a6181848376c.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/a8641929-8e21-4a93-acd9-661fd8748c32.log 2>&1
(find /home/huong -name "flask" -type d) >> /tmp/445c878a-6a91-468b-a30c-f44304686c1c.log 2>&1
(find /home/huong -name "python*" -type d | grep -v "__pycache__" | sort) >> /tmp/0b6d02fd-ebef-4b8e-b9d1-096131ae356e.log 2>&1
(pip3 install --user flask) >> /tmp/03448c47-de0f-4653-9740-72c796703829.log 2>&1
(dpkg -l | grep -i flask) >> /tmp/9cfc48e7-556e-4416-b484-73ea9503d27b.log 2>&1
sudo apt-get install python3-flask
cd qtcsdl
cd ..
cd nhakhoaso
python3 app.py
(python3 --version) >> /tmp/5fb21b99-d463-4749-bce7-b61539dc4cb9.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "import sys; print(sys.path)") >> /tmp/41e83444-867c-4af5-a496-e1e9d1492bf3.log 2>&1
(cd /home/huong && rm -rf venv) >> /tmp/e8252cc6-4f5e-4b3f-bacb-014b6c2b45b4.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/c08e279f-e572-40fb-810c-ec570da1057f.log 2>&1
(find /home/huong/nhakhoaso/database -type f -name "*.py" | xargs grep -l "DB_CONFIG") >> /tmp/f4438e23-fb2b-4c8c-a45b-950da93166a2.log 2>&1
(cat /home/huong/nhakhoaso/database/db.py) >> /tmp/81539acb-c7bb-4f06-b73b-04599c55b846.log 2>&1
(cd /home/huong/nhakhoaso && echo 'import sqlite3
import os
import sys
import datetime

# Thêm thư mục gốc vào sys.path để import config
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from config import DB_PATH

def dict_factory(cursor, row):
    """
    Chuyển đổi kết quả truy vấn thành dictionary
    """
    d = {}
    for idx, col in enumerate(cursor.description):
        value = row[idx]
        # Chuyển đổi datetime.date thành datetime.datetime
        if isinstance(value, str) and len(value) == 10 and value[4] == "-" and value[7] == "-":
            try:
                value = datetime.datetime.strptime(value, "%Y-%m-%d")
            except ValueError:
                pass
        d[col[0]] = value
    return d

def get_connection():
    """
    Tạo và trả về kết nối đến cơ sở dữ liệu SQLite
    """
    try:
        connection = sqlite3.connect(DB_PATH)
        connection.row_factory = dict_factory
        return connection
    except sqlite3.Error as e:
        print(f"Lỗi khi kết nối đến SQLite: {e}")
    return None

def execute_query(query, params=None, fetch=False):
    """
    Thực thi truy vấn SQL và trả về kết quả nếu cần
    
    Args:
        query (str): Câu truy vấn SQL
        params (tuple, optional): Tham số cho câu truy vấn
        fetch (bool, optional): Có lấy kết quả hay không
        
    Returns:
        list/None: Kết quả truy vấn hoặc None nếu không cần lấy kết quả
    """
    # Thay thế %s bằng ? cho SQLite
    query = query.replace("%s", "?")
    
    connection = get_connection()
    result = None
    
    if connection:
        try:
            cursor = connection.cursor()
            if params:
                cursor.execute(query, params)
            else:
                cursor.execute(query)
                
            if fetch:
                result = cursor.fetchall()
            else:
                connection.commit()
                result = cursor.lastrowid
                
            cursor.close()
            
        except sqlite3.Error as e:
            print(f"Lỗi khi thực thi truy vấn: {e}")
        finally:
            connection.close()
                
    return result' > database/db.py) >> /tmp/1d5e0b2c-edf4-42f7-b825-323dabf448c7.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/369d2f11-f017-4546-9390-966607f11a94.log 2>&1
(curl http://127.0.0.1:5000) >> /tmp/33964ecd-b853-4653-936f-cdbe256b7b95.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(host='0.0.0.0', port=5000, debug=True)" &) >> /tmp/cc6f45b1-2143-447e-945b-c96d4ae5b485.log 2>&1
(sleep 2 && curl http://localhost:5000) >> /tmp/3fe2b28a-0da8-419a-bc21-4996845a1bdf.log 2>&1
(curl http://localhost:5000/benh-nhan) >> /tmp/7c171316-a8a4-4641-ac4c-f279416ea81b.log 2>&1
(curl http://localhost:5000/benh-nhan/them-moi) >> /tmp/302ac92d-43ab-430b-a498-7e8c9d2d4fe5.log 2>&1
cd nhakhoso
cd nhakhoasso
cd nhakhoaso
python3 app.py
(ps aux | grep python) >> /tmp/5c968a87-ead2-47e6-ac5c-4454d0dec0c2.log 2>&1
(kill 8530 8533) >> /tmp/eae095b5-caa3-4059-8996-ed85e764de18.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; app.run(host='0.0.0.0', port=5001, debug=True)" &) >> /tmp/c2d012cd-2c86-4090-9d4a-372b62ccde0c.log 2>&1
(sleep 2 && curl http://localhost:5001) >> /tmp/d52c9492-4b9f-4463-9898-3a359e2c5738.log 2>&1
(ps aux | grep python) >> /tmp/6568cc6a-3d31-4412-9cbe-6b5f784a3a19.log 2>&1
(kill 9435 9718) >> /tmp/aa9e5dc8-70bd-4052-ace1-f771be03851a.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/4b40d266-63c0-465c-ad5d-3583cf468767.log 2>&1
cd nhakhoaso
python3 app.py
(curl -s http://localhost:5001/ | grep -i error) >> /tmp/3fc177db-0b6e-42b5-a0ac-ae2220a59d02.log 2>&1
(curl -s http://localhost:5001/benh-nhan | grep -i error) >> /tmp/10e21a28-15ba-4e2d-a892-c3a8bd891854.log 2>&1
(curl -s http://localhost:5001/benh-nhan/them-moi | grep -i error) >> /tmp/cddd973b-2e14-4311-afb0-b74f783bb276.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -i error) >> /tmp/c4242771-d53b-4993-bb00-f14d347384ee.log 2>&1
(curl -s http://localhost:5001/benh-nhan/tim-kiem) >> /tmp/ddb3d44b-8528-426f-a626-5db488ec493e.log 2>&1
(ps aux | grep python) >> /tmp/0d105cc1-c59d-4fa9-8178-c22a42fce945.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/5cb2f3b4-b524-468c-97ff-6a3a91da1ffd.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=Nguyễn&loai_tim_kiem=ho_ten" -H "Content-Type: application/x-www-form-urlencoded" | grep -A 5 "Kết quả tìm kiếm") >> /tmp/95ee09cf-0c51-4764-ae65-d9e30c0f39ad.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=Nguyễn&loai_tim_kiem=ho_ten" -H "Content-Type: application/x-www-form-urlencoded" | grep -A 20 "result-header") >> /tmp/94e4c837-c0c9-4105-879a-8562909edb58.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=Nguyễn&loai_tim_kiem=ho_ten" -H "Content-Type: application/x-www-form-urlencoded") >> /tmp/799e2930-02a5-4a9d-9ee7-159b3b0f2466.log 2>&1
(curl -s http://localhost:5001) >> /tmp/69d4197f-886c-4b0e-86e1-61d2ac399fa0.log 2>&1
(ps aux | grep python) >> /tmp/a70c6770-7edf-4a25-b275-e8acc092546b.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py &) >> /tmp/d2fbd421-6e17-4cea-a21c-2b4922390b1d.log 2>&1
(sleep 2 && curl -s http://localhost:5001) >> /tmp/1c65f45d-6787-4d5d-bdb7-d9d94c202333.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=Nguyễn&loai_tim_kiem=ho_ten" -H "Content-Type: application/x-www-form-urlencoded" | grep -A 20 "result-header") >> /tmp/25393ba7-d8fc-406c-a915-4a28c54cac4f.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=0901&loai_tim_kiem=so_dien_thoai" -H "Content-Type: application/x-www-form-urlencoded" | grep -A 20 "result-header") >> /tmp/3607916c-9207-4c24-ab3a-ac5a5a6e333f.log 2>&1
(curl -s "http://localhost:5001/benh-nhan/tim-kiem" -X POST -d "tu_khoa=BN0000&loai_tim_kiem=ma_benh_nhan" -H "Content-Type: application/x-www-form-urlencoded" | grep -A 20 "result-header") >> /tmp/782e03c9-2522-42cc-9c01-73b546c30221.log 2>&1
cd nhakhoaso
python3 app.py
(ps aux | grep python) >> /tmp/02521f67-da30-4ce8-8e1b-ed40f9d8847d.log 2>&1
(kill 15040 15043) >> /tmp/5b84cb42-ea41-4f2c-89b1-45371fe67007.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/48193ff8-e2a8-4627-8efa-05cb59f3b7b6.log 2>&1
cd nhakhoaso
python3 app.py
cd nhakhoaso
python3 app.py
cd ..
sqlite3 QLPhongKhamNhaKhoa
cd nhakhoaso
sqlite3 QLPhongKhamNhaKhoa.db
(ls -la /home/huong/nhakhoaso/database/nhakhoaso.db) >> /tmp/3d62a4f9-ce19-45d3-a923-057c8069036e.log 2>&1
cd nhakhoaso
sqlite3 QLPhongKhamNhaKhoa.db
sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".tables"
.tables
sqlite3 nhakhoaso.db
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".tables") >> /tmp/f6a10328-5681-47a5-ac94-7f42c7fc2bf0.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema BENHNHAN") >> /tmp/687ccca8-7faf-4913-8e50-c5adf13a31a1.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".mode column" ".headers on" "SELECT * FROM BENHNHAN;") >> /tmp/5eff3fd6-8497-4c24-9434-a7dcf8e8eca2.log 2>&1
sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db
sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db
.tables
sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema BENHNHAN"
SELECT * FROM BENHNHAN;
cd nhakhoaso
cd database
sqlite3 nhakhoaso.db
cd nhakhoaso
cd database
cd sqlite3 QLPhongKhamNhaKhoa.db
cd sqlite3 nhakhoaso.db
cd nhakhoaso
cd databases
cd database
sqlite3 nhakhoaso.db
cd nhakhoaso
cd database
.sqlite3 nhakhoaso.db
sqlite3 nhakhoaso.db
cd nhakhoaso
python3 app.py
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema BACSI") >> /tmp/e6e5b28f-6640-4cee-b3d8-d36a409e4e5a.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".mode column" ".headers on" "SELECT * FROM BACSI;") >> /tmp/94ecf3a4-5818-4a5c-8e47-d1d508d4aa56.log 2>&1
(ps aux | grep python) >> /tmp/24f39ed2-162b-43f8-b2ec-8a75b127efc6.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/bae654b9-9eac-4748-b590-c84736de6481.log 2>&1
(lsof -i :5001) >> /tmp/e66fcb1d-a57b-40ea-beeb-2fdd2fdd909a.log 2>&1
(kill 5100 5101) >> /tmp/97e14302-b81d-4fc5-b4ac-711d2b71e9b7.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/42c16b14-ed79-4b66-bb76-41dfe346d537.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 5 "Danh sách bác sĩ") >> /tmp/28693f30-dc15-4240-b99e-afa7d4035f80.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 20 "content-header") >> /tmp/4b954b9f-1f52-482a-94c0-e8233e36d611.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 20 "content-header") >> /tmp/28d59e28-f7ee-4dc1-afa4-efb8f3395515.log 2>&1
(curl -s http://localhost:5001/bac-si) >> /tmp/549e7e79-0725-4075-b59c-6d12cc9ee18b.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".mode column" ".headers on" "SELECT * FROM BACSI;") >> /tmp/76c44ef4-6779-4570-928d-4348143115d4.log 2>&1
(curl -s http://localhost:5001/bac-si | head -20) >> /tmp/4fee4cb6-a9f4-47cf-b4bd-16a2074bd57f.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 20 "data-table") >> /tmp/bc0f7d0d-923b-417c-a709-068ddc9a3fb2.log 2>&1
(ps aux | grep python) >> /tmp/8fcf4af3-32e9-4eec-b3eb-0c8b34088739.log 2>&1
(curl -s http://localhost:5001/bac-si/them-moi | head -20) >> /tmp/12cf8739-4eba-46b7-ba97-4d0c29c93bdc.log 2>&1
(curl -s -X POST -d "ma_bac_si=BS00000006&ho_ten=Nguyễn Văn Test&so_dien_thoai=0987654321" -H "Content-Type: application/x-www-form-urlencoded" http://localhost:5001/bac-si/them-moi) >> /tmp/03a36919-d3dd-4c6b-b997-189e8e736f78.log 2>&1
(grep -n "def bac_si" /home/huong/nhakhoaso/app.py) >> /tmp/802751df-05ac-411c-be50-42051f6a1d97.log 2>&1
(ps aux | grep python) >> /tmp/99f820f4-f98e-461b-95df-8e1d2bbfa317.log 2>&1
(kill 7966 10955) >> /tmp/31bca08e-afee-4436-af8a-c6f47a01c7a0.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/a554d24a-0850-451f-86d0-1ee054c0de46.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 20 "data-table") >> /tmp/8ea47704-005b-4f3a-8049-9bb851116900.log 2>&1
(curl -s http://localhost:5001/bac-si | grep -A 20 "tbody") >> /tmp/e635a7ad-f275-480b-998c-a1101bf7537f.log 2>&1
(curl -s http://localhost:5001/bac-si | head -20) >> /tmp/06a3e1ba-8f68-408e-8853-70d6b23f6411.log 2>&1
(ps aux | grep python) >> /tmp/af518430-e3ed-4a90-9b9f-e85239316cef.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/b3e9aa04-8276-447b-8f45-1a39e20d374e.log 2>&1
cd nhakhoaso
python3 app.py
cd ..
cd nhakhoaso
python3 app.oy
python3 app.py
(grep -r "bac_si_list" /home/huong/nhakhoaso) >> /tmp/359e69df-9c41-4d82-a339-3f8ebe14c8ba.log 2>&1
(grep -r "bac_si_list" /home/huong/nhakhoaso) >> /tmp/fa19592a-935c-4c23-a62d-70e517a635d6.log 2>&1
(ls -la /home/huong/nhakhoaso/database/) >> /tmp/38de6465-5b28-4a4e-aeef-0adc78980b42.log 2>&1
(cd /home/huong/nhakhoaso && python -c "import sqlite3; conn = sqlite3.connect('database/nhakhoaso.db'); cursor = conn.cursor(); cursor.execute('PRAGMA table_info(BENHNHAN)'); print(cursor.fetchall()); conn.close()") >> /tmp/3d4c393c-1e66-4a1a-bfd2-0baaab361c71.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "import sqlite3; conn = sqlite3.connect('database/nhakhoaso.db'); cursor = conn.cursor(); cursor.execute('PRAGMA table_info(BENHNHAN)'); print(cursor.fetchall()); conn.close()") >> /tmp/8d3eeed8-843c-43cf-b6d8-464df0affbc8.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "import sqlite3; conn = sqlite3.connect('database/nhakhoaso.db'); cursor = conn.cursor(); cursor.execute('SELECT * FROM BENHNHAN'); print(cursor.fetchall()); conn.close()") >> /tmp/36c9e07c-273c-44d6-abad-17976d7c84ab.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/bf7be4b1-cec0-4a41-aa3a-038496a8b3ad.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database import benh_nhan; print(benh_nhan.get_all_benh_nhan())") >> /tmp/9942f51b-dc4c-4c2b-ae9b-bd210e577454.log 2>&1
(cd /home/huong/nhakhoaso && pkill -f "python3 app.py" && python3 app.py) >> /tmp/ea81296b-db92-432c-80a3-c8825a8459b9.log 2>&1
(cd /home/huong/nhakhoaso && pkill -f "python3 app.py" && python3 app.py) >> /tmp/2c7e9010-976b-425f-a857-d85218081b5c.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.phieu_kham import get_all_phieu_kham; print(get_all_phieu_kham())") >> /tmp/345d4117-5c3f-483d-ba21-73e49b99c7eb.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham | grep -A 20 "<tbody>") >> /tmp/2c7ec5db-8fbf-4a0d-bbe0-6e62cc2b6b3d.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.phieu_kham import get_all_phieu_kham; print(len(get_all_phieu_kham()))") >> /tmp/aa9e2663-ef5f-4ec0-a680-eb95607f3f10.log 2>&1
(cd /home/huong/nhakhoaso && pkill -f "python3 app.py" && python3 app.py) >> /tmp/a4a57532-9896-4c2f-99f8-bcc55631af6e.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /dev/null) >> /tmp/aacb8055-57f8-469d-8209-e83779f9ec38.log 2>&1
(cd /home/huong/nhakhoaso && cat app.log) >> /tmp/7c0d79e9-c46a-43ba-a54f-110ee34a3e5c.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.phieu_kham import get_all_phieu_kham; print(get_all_phieu_kham())") >> /tmp/f6828d4e-f0ee-4d25-b6ef-86af40ab0d50.log 2>&1
(cd /home/huong/nhakhoaso && grep -n "@app.route('/phieu-kham')" app.py) >> /tmp/426c77a4-52b2-42ba-8b5c-7442420c5505.log 2>&1
(cd /home/huong/nhakhoaso && pkill -f "python3 app.py" && python3 app.py) >> /tmp/8df389e6-104e-4b28-9232-c7c0439eaa8f.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /dev/null) >> /tmp/a3531514-1210-4ea4-8da2-8f5b3ecd933f.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham | grep -A 20 "<tbody>") >> /tmp/9b6237ed-f3a7-428a-9486-a6d0d6bf6d63.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/cf6e84e9-1bdc-4b6f-a705-2b9153a2f63f.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham | grep -A 20 "<tbody>") >> /tmp/cfaa9949-81c1-4ed4-8600-2ad82a81946c.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /dev/null) >> /tmp/2a0d77e9-d4bf-4dca-af36-1fcfd653075d.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham | grep -A 10 "phieu_kham_list") >> /tmp/db7443ad-bccc-4ad6-9cc3-5e792604065b.log 2>&1
(cd /home/huong/nhakhoaso && pkill -f "python3 app.py" && python3 app.py) >> /tmp/cdc59749-1e08-4c78-a8ec-693325f433b5.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham | grep -A 10 "DEBUG") >> /tmp/af7cb187-f08b-4307-b9c5-35ff93498a33.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/5cc8bc02-455f-47d3-a9c7-adbd272dabc9.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && grep -A 10 "DEBUG" /tmp/phieu_kham.html) >> /tmp/93e57648-235e-4526-9c3f-3989108b68c9.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && head -n 200 /tmp/phieu_kham.html | grep -A 10 "module-content") >> /tmp/cf48f8f1-d2eb-4284-aa83-6d3f33f1af53.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && cat /tmp/phieu_kham.html | wc -l) >> /tmp/fdaefe56-8805-43f8-ab61-1d7cc0108d30.log 2>&1
(ps aux | grep python) >> /tmp/527d2581-799d-4b5c-88af-f78fbd8f0859.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/00dcaa57-4021-43b0-9bc8-c12bc751780c.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /dev/null) >> /tmp/d51b3275-a072-47be-a3ca-198d5dfbfbb5.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && grep -A 10 "DEBUG" /tmp/phieu_kham.html) >> /tmp/b614fecd-49b6-41ea-bbb6-54f9b01cf8fe.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && grep -A 10 "module-content" /tmp/phieu_kham.html) >> /tmp/74a368ec-4b71-4a22-95a1-58a140a585a7.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && cat /tmp/phieu_kham.html | wc -l) >> /tmp/7b526e1e-46ca-481d-8716-972034f8ceb1.log 2>&1
(ps aux | grep python) >> /tmp/58c0df17-5f99-4ae0-a768-18ba547a72be.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.phieu_kham import get_all_phieu_kham; print(get_all_phieu_kham())") >> /tmp/47f396ab-4a54-48b5-88eb-2ebfc98ac229.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from app import app; from flask import render_template; from database.phieu_kham import get_all_phieu_kham; with app.app_context(): phieu_kham_list = get_all_phieu_kham(); print(phieu_kham_list); print(render_template('phieu_kham.html', phieu_kham_list=phieu_kham_list))") >> /tmp/6322b9ed-033a-4139-89db-2b2df7fddb6b.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/cf8c13dd-aeb5-4a65-93f5-b2924f337353.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/phieu-kham > /tmp/phieu_kham.html && head -n 20 /tmp/phieu_kham.html) >> /tmp/eefce1d1-b544-4018-bfeb-b82a9c48be5c.log 2>&1
(cd /home/huong && curl -s http://localhost:5001/ > /tmp/index.html && head -n 20 /tmp/index.html) >> /tmp/9a4bb74b-934f-48e2-b0bd-3b31c935debd.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('DESCRIBE PHIEUKHAM', fetch=True))") >> /tmp/680ca24b-f127-41a7-b6e4-a1dedb73f0b6.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('PRAGMA table_info(PHIEUKHAM)', fetch=True))") >> /tmp/067be063-1b2d-4a00-bb43-fbf86eef456e.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print('Số lượng bệnh nhân:', len(execute_query('SELECT * FROM BENHNHAN', fetch=True))); print('Số lượng bác sĩ:', len(execute_query('SELECT * FROM BACSI', fetch=True))); print('Số lượng dịch vụ:', len(execute_query('SELECT * FROM DICHVU', fetch=True)))") >> /tmp/86dcb6a5-18df-4fbc-a1c9-f870c0989781.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print('Số lượng phiếu khám:', len(execute_query('SELECT * FROM PHIEUKHAM', fetch=True)))") >> /tmp/56f4b6b2-24a3-46bb-9317-c069898f0cec.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.phieu_kham import get_all_phieu_kham; print('Số lượng phiếu khám (với JOIN):', len(get_all_phieu_kham()))") >> /tmp/ecae4818-182d-44c4-b51e-16038dae252a.log 2>&1
cd nhakhoaso
python3 app.py
cd nhakhoaso
cd database
sqlite2 nhakhoaso.db
sqlite3 nhakhoaso.db
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/868df6c8-0671-48a1-829e-064759931744.log 2>&1
cd qtcsdl
docker start mysql-container
flask run
docker stop mysql-container
;
docker stop mysql-container
cd qtcsdl
docker exec -it mysql-container mysql -u root -p
(grep -n "def lich_hen" /home/huong/nhakhoaso/app.py) >> /tmp/54e2642a-bd49-4b6b-a5e9-33d3032cb65c.log 2>&1
(grep -n "def dich_vu" /home/huong/nhakhoaso/app.py) >> /tmp/88d7b1d2-e628-4d05-aca8-0cab68102873.log 2>&1
(grep -n "def thanh_toan" /home/huong/nhakhoaso/app.py) >> /tmp/5c85d636-9bb1-40f5-b7f3-f29e6c4bd1dc.log 2>&1
(grep -n "def bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/b55df2fb-2381-49a9-bd4e-b8d864fa0a8e.log 2>&1
(grep -r "TenBenhNhan\|TenBacSi\|TenDichVu" /home/huong/nhakhoaso/templates/) >> /tmp/125919f3-9844-401d-9983-92a886f0a3d5.log 2>&1
(grep -r "pk.TenBenhNhan\|pk.TenBacSi\|pk.TenDichVu" /home/huong/nhakhoaso/templates/) >> /tmp/f59d870b-208e-42ef-ba71-3b373a52080e.log 2>&1
(grep -r "phieu_kham.TenBenhNhan\|phieu_kham.TenBacSi\|phieu_kham.TenDichVu" /home/huong/nhakhoaso/templates/) >> /tmp/c67d07c8-18e3-4db8-b7b0-22d93b229a0e.log 2>&1
(grep -r "TenBenhNhan" /home/huong/nhakhoaso/templates/) >> /tmp/0e77d8f3-d71c-471e-917b-fde37c8bbf38.log 2>&1
(grep -r "TenBacSi" /home/huong/nhakhoaso/templates/) >> /tmp/b461ca2e-f3d8-4767-90dd-4335c444a4fc.log 2>&1
(grep -r "TenDichVu" /home/huong/nhakhoaso/templates/) >> /tmp/cd5ad259-d22a-4271-9867-982ecfe5180b.log 2>&1
(grep -r "TenBenhNhan\|TenBacSi\|TenDichVu" /home/huong/nhakhoaso/database/) >> /tmp/debbb5c7-dc3c-4daa-8986-06f4743d9d3d.log 2>&1
(grep -r "JOIN BENHNHAN\|JOIN BACSI\|JOIN DICHVU" /home/huong/nhakhoaso/database/) >> /tmp/2bc4eff0-2485-428f-b31b-9f8cc06d9f72.log 2>&1
(grep -r "colspan=\"7\"" /home/huong/nhakhoaso/templates/) >> /tmp/9277a864-6588-40b1-b85f-cbc08c381e7c.log 2>&1
(grep -r "colspan=\"8\"" /home/huong/nhakhoaso/templates/) >> /tmp/5bb65022-32c5-4ff9-82ac-bfbebac2afa0.log 2>&1
(python3 -m py_compile /home/huong/nhakhoaso/database/phieu_kham.py) >> /tmp/79b95daf-47ea-4090-a13c-2eba3f38ed42.log 2>&1
(python3 -m py_compile /home/huong/nhakhoaso/app.py) >> /tmp/b2fb87f7-d5c6-49b4-ad16-7acb0ffd5953.log 2>&1
(grep -r "sidebar-title" /home/huong/nhakhoaso/static/) >> /tmp/4f993ab7-169a-4c6e-8a97-dbeed7bae639.log 2>&1
(grep -r "sidebar-menu" /home/huong/nhakhoaso/static/) >> /tmp/5125ab9c-b902-42d5-ba81-32007008ce19.log 2>&1
(grep -r "sidebar" /home/huong/nhakhoaso/static/script.js) >> /tmp/c4a2f96c-05ba-44b9-98b7-bb506191eaa1.log 2>&1
(grep -r "sidebar-title" /home/huong/nhakhoaso/templates/) >> /tmp/0344d15d-f673-4896-9aed-3a206b571b2c.log 2>&1
(grep -r "Quản lý phiếu khám" /home/huong/nhakhoaso/templates/) >> /tmp/2a41f602-f881-47c8-a444-b5261d57fcab.log 2>&1
(grep -r "sidebar-title.*Quản lý phiếu khám" /home/huong/nhakhoaso/templates/) >> /tmp/803ebd76-194c-4762-8052-49ff4b7576ea.log 2>&1
(grep -r "sidebar-title.*chart-line" /home/huong/nhakhoaso/templates/) >> /tmp/d80ce14d-2e18-4a10-a1eb-56415a1f8578.log 2>&1
(grep -r "sidebar-title.*fas fa-chart-line" /home/huong/nhakhoaso/templates/) >> /tmp/a1a85b1f-26d1-497d-8b3f-9d08b220eb7b.log 2>&1
(grep -r "sidebar-title.*chart" /home/huong/nhakhoaso/templates/) >> /tmp/674779a3-a879-4beb-9f39-0ef78b6e477b.log 2>&1
(grep -r "sidebar-title.*fa-chart" /home/huong/nhakhoaso/templates/) >> /tmp/393aac86-fd87-47f7-a871-83dd585c7ef1.log 2>&1
(grep -r "sidebar-title.*fa-chart-line" /home/huong/nhakhoaso/templates/) >> /tmp/23e6716d-65e3-4ba3-ba81-f9ad23c53a2c.log 2>&1
(grep -r "sidebar-title.*phieu" /home/huong/nhakhoaso/templates/) >> /tmp/115f9242-d004-4bf0-acb1-57aef4aeec11.log 2>&1
(grep -r "sidebar-title.*phiếu" /home/huong/nhakhoaso/templates/) >> /tmp/2b1620f7-b1d1-4277-a872-8c4fc4bdaa35.log 2>&1
(grep -r "sidebar-title" /home/huong/nhakhoaso/static/script.js) >> /tmp/c631f61e-a344-47e0-a594-46e682ed2f31.log 2>&1
(grep -r "sidebar-title" /home/huong/nhakhoaso/templates/phieu_kham.html) >> /tmp/40117f70-e796-4024-9b76-1752cf06303d.log 2>&1
(grep -r "sidebar-title.*Quản lý phiếu khám" /home/huong/nhakhoaso/templates/phieu_kham.html) >> /tmp/e25a5e89-f38c-453b-b622-636e9ac682a2.log 2>&1
(grep -r "Quản lý phiếu khám" /home/huong/nhakhoaso/templates/phieu_kham.html) >> /tmp/d80e513d-8571-41e0-aad8-afa69569a9ba.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/49e3d96e-f133-44ad-81e8-595aac5523c9.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/707e27c7-95ab-4ef6-ab45-9ec9a3696545.log 2>&1
(grep -r "sidebar-title.*fa-chart-line" /home/huong/nhakhoaso/templates/) >> /tmp/9fd50320-27d3-48a3-84e3-c854919c0ada.log 2>&1
(grep -r "fas fa-chart-line" /home/huong/nhakhoaso/templates/) >> /tmp/a343bc27-a033-4f45-9a5c-a36b884bc9eb.log 2>&1
cd nhakhoaso
flask run
cd nhakhoaso
cd database
sqlite3 nhakhoaso.db
cd nhakhoaso
flask run
(cd /home/huong && python -m nhakhoaso.app) >> /tmp/c6328c8f-2520-4007-845f-0f283892dd4d.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/755b5f1e-a38e-457e-a7a3-edcb862d729e.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/ec68af78-8803-4a4d-bbea-6f5182ed4678.log 2>&1
(ls -la /home/huong/nhakhoaso/database/nhakhoaso.db) >> /tmp/dde2e86b-0126-4163-8bb4-fe2bfb631ff3.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/e84e3416-a4e1-403b-9d09-a74f4c88866c.log 2>&1
(cd /home/huong/nhakhoaso && grep -r "url_for('lich_hen')" --include="*.html" .) >> /tmp/f0330423-37ca-437b-bfb1-78fe269195ca.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/ee0720bd-e9d7-42fa-be1f-ddfc0b5a9a45.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/791edf62-13eb-4447-a721-dda7631b6be7.log 2>&1
(cd /home/huong/nhakhoaso && python init_database.py) >> /tmp/6dd4dce0-bb54-41de-ae93-37ba65828737.log 2>&1
(cd /home/huong/nhakhoaso && python3 init_database.py) >> /tmp/dd79cc8e-c000-41c5-b093-ff3b5dc84e0a.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('SELECT name FROM sqlite_master WHERE type=\"table\" AND name=\"HOADON\"', fetch=True))") >> /tmp/7286d818-9d3a-48d3-ade8-395522550386.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py &) >> /tmp/9153fab8-1433-4566-9186-e93595d9cf1f.log 2>&1
(cd /home/huong && python -m nhakhoaso.app) >> /tmp/b1a0986d-5ab4-4e5d-9452-3987791be1f6.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/5225c73b-e610-494d-9524-e7a543faf6c6.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/d67ab6c0-b10e-485a-9f8d-661a115cf37b.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/635adb54-2836-4072-a648-2ffab8916c2d.log 2>&1
(rm /home/huong/nhakhoaso/templates/thanh_toan.html) >> /tmp/65a5dacf-2492-4640-8c04-bfe4f9860f23.log 2>&1
(sudo rm -f /home/huong/nhakhoaso/templates/thanh_toan.html) >> /tmp/70370c98-2e30-4751-80e3-d59b0aadce6c.log 2>&1
(ls -la /home/huong/nhakhoaso/templates/thanh_toan.html) >> /tmp/6ae3640f-4b79-4f40-a2cb-df0d7500d675.log 2>&1
(file /home/huong/nhakhoaso/templates/thanh_toan.html) >> /tmp/965f170a-15fe-4607-b641-4eecbc0c4cbd.log 2>&1
(ls -la /home/huong/nhakhoaso/templates/) >> /tmp/9be66d26-0f5b-4402-9ec8-2d74c7a1868e.log 2>&1
(mkdir -p /home/huong/nhakhoaso/templates) >> /tmp/ade796a8-e458-4e9a-a5c0-ec75a508d401.log 2>&1
(ls -ld /home/huong/nhakhoaso/templates) >> /tmp/602bff1e-1afb-4f29-90dd-aaea38f37d49.log 2>&1
(cd /home/huong/nhakhoaso && python app.py) >> /tmp/70b98286-d640-4b1d-aefe-0ef20b6ae2b1.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/cb33659c-3809-42b8-ba3e-9968bceb5f22.log 2>&1
(grep -n "def bao_cao_doanh_thu" /home/huong/nhakhoaso/app.py) >> /tmp/7ec4f8bb-dc9c-4b44-9531-0fcd9f2db6d7.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/30f85807-64d1-45e5-b183-ab10566bd9a9.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/f35d1469-53a3-47da-af69-045194d3ccae.log 2>&1
(grep -r "them_moi_hoa_don" /home/huong/nhakhoaso/templates/) >> /tmp/67ebc380-5ced-4810-bd9c-d8756778a521.log 2>&1
(grep -r "tim_kiem_hoa_don" /home/huong/nhakhoaso/templates/) >> /tmp/5d7ff782-5d66-4dd2-9476-ff1d8bc0e459.log 2>&1
(grep -r "hoa_don_list" /home/huong/nhakhoaso/templates/) >> /tmp/0296e5d7-2507-4908-a033-301fbd47e35b.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/b6fadecb-4eab-4f61-88aa-c0f8c1b6dcfb.log 2>&1
cd nhakhoaso
flask run
(cd /home/huong && python update_templates.py) >> /tmp/8d6ce695-aeb9-4d2b-951b-f51c3aaedda4.log 2>&1
(cd /home/huong && python3 update_templates.py) >> /tmp/ba2b36f4-e881-41f2-92fe-5ff4911bb118.log 2>&1
(cd /home/huong && python3 fix_templates.py) >> /tmp/795c8590-74da-400a-8ced-9979501a7b84.log 2>&1
(cd /home/huong && python3 fix_templates_advanced.py) >> /tmp/33afee03-21dd-4f9e-951c-0921f8d04311.log 2>&1
(cd /home/huong && python3 fix_indentation.py) >> /tmp/e9f08e41-fdf9-482f-b359-6d38a58b90cb.log 2>&1
(cd /home/huong && python3 fix_all_templates.py) >> /tmp/3bfc2866-ad6f-4ad7-8dd0-6f45341e4bb0.log 2>&1
(cd /home/huong && cp app_fixed.py nhakhoaso/app.py) >> /tmp/dc6a3abb-cfda-4cd4-b9c9-07883bbb6647.log 2>&1
(ls -la /home/huong/nhakhoaso/app.py) >> /tmp/f92a2cef-b09b-4c59-a1f5-5d791ea93563.log 2>&1
(cd /home/huong/nhakhoaso && python app.py) >> /tmp/9003a289-a425-4c9d-8a6e-17e03226227d.log 2>&1
(cd /home/huong/nhakhoaso && python app.py) >> /tmp/0a2c6dbc-1082-47a1-be21-4fb499f22447.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/a021f522-90fd-42c0-9eb7-81f2151e2225.log 2>&1
(cd /home/huong && grep -n "bac_si_page" nhakhoaso/app.py) >> /tmp/219a18a1-728b-4563-b0cf-15d24d2eb337.log 2>&1
(cd /home/huong && grep -r "bac_si_page" nhakhoaso/templates/) >> /tmp/993119f5-e984-4fb8-b7dc-4d2d2cf6498f.log 2>&1
(cd /home/huong && grep -r "bac_si_page" nhakhoaso/templates/) >> /tmp/410a9612-8c7f-423f-b7d5-45309fa90403.log 2>&1
(cd /home/huong && grep -n "@app.route('/lich-hen')" nhakhoaso/app.py) >> /tmp/f249d8c2-17eb-46f4-a36d-c8c38f17800b.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/acbe0e4c-0905-4a5b-b75e-13168b8c5a0c.log 2>&1
(cd /home/huong/nhakhoaso && python3 app.py) >> /tmp/53e28efc-a97b-404a-acb7-c41c8a52f427.log 2>&1
(curl -s http://localhost:5001/benh-nhan/tim-kiem | head -n 20) >> /tmp/3aa15728-10eb-445f-9b90-2fd7f68164c2.log 2>&1
(curl -s http://localhost:5001/bac-si | head -n 20) >> /tmp/001419b3-27a1-4aaa-b4fa-1bb19c703e80.log 2>&1
(ps aux | grep python) >> /tmp/f223d5e2-431b-4c25-a5d4-95691feaf280.log 2>&1
(curl -s http://localhost:5001/ | head -n 20) >> /tmp/2b6cb313-5e39-46b5-89fb-85991e4fe4f5.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --host=0.0.0.0 --port=5002) >> /tmp/b539b092-23d9-43cd-b1b6-233b10d4fa5c.log 2>&1
(curl -s http://localhost:5002/ | grep -o "SERVICES" || echo "Không tìm thấy") >> /tmp/862bdc2a-b297-4139-b82d-f7d89d98ffc5.log 2>&1
(ps aux | grep "python3 -m flask run") >> /tmp/581249db-45ea-4995-b0bb-8cfd3df491d1.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --host=0.0.0.0 --port=5002 &) >> /tmp/c5256edf-10dc-4d16-be6c-4a31602d8d82.log 2>&1
(ps aux | grep "python3 -m flask run") >> /tmp/059d0ebb-2231-455c-9426-c48c5aef0884.log 2>&1
(curl -s http://localhost:5002/ | grep -o "SERVICES" || echo "Không tìm thấy") >> /tmp/c55fa215-4fa6-4744-8f47-7d2caebc8542.log 2>&1
(curl -s http://localhost:5002/benh-nhan | grep -o "QUẢN LÝ BỆNH NHÂN" || echo "Không tìm thấy") >> /tmp/77aa1462-a1fe-4bc1-8633-f84a2fd40409.log 2>&1
(curl -s http://localhost:5002/benh-nhan/tim-kiem | grep -o "Tìm kiếm bệnh nhân" || echo "Không tìm thấy") >> /tmp/7ee89378-4053-4b3d-93c9-99e73dead602.log 2>&1
(curl -s http://localhost:5002/benh-nhan/them-moi | grep -o "Thêm mới bệnh nhân" || echo "Không tìm thấy") >> /tmp/1b9e0b23-e278-405a-82d6-309ed586bedf.log 2>&1
cd nhakhoaso
flask run
(curl -s http://localhost:5002/bac-si | grep -o "QUẢN LÝ BÁC SĨ" || echo "Không tìm thấy") >> /tmp/00cf489b-839f-46b4-8586-1cba43899076.log 2>&1
(curl -s http://localhost:5002/bac-si | grep -o "QUẢN LÝ BÁC SĨ" || echo "Không tìm thấy") >> /tmp/50626e86-e118-414c-b2cb-3152d2f43cda.log 2>&1
(curl -s http://localhost:5002/bac-si | grep -o "TemplateSyntaxError" || echo "Không tìm thấy lỗi") >> /tmp/7a2b0722-48b2-4f43-889c-e2b4a87f0f0d.log 2>&1
(curl -s http://localhost:5002/bac-si/them-moi | grep -o "Thêm mới bác sĩ" || echo "Không tìm thấy") >> /tmp/eb49dc48-55ae-4ab5-8080-50f1db0388fb.log 2>&1
(curl -s http://localhost:5002/bac-si/tim-kiem | grep -o "Tìm kiếm bác sĩ" || echo "Không tìm thấy") >> /tmp/f2051be8-818e-432b-890b-e50f3388e360.log 2>&1
(ps aux | grep "python3 -m flask run" | grep -v grep | awk '{print $2}') >> /tmp/2a3c8ad3-3efa-4b9c-9a4f-6c3ef9b8b168.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --host=0.0.0.0 --port=5002) >> /tmp/90e33653-5070-4951-8ec0-199512f8d37b.log 2>&1
cd nhakhoaso
flask run
(ls -la /home/huong/nhakhoaso/database/) >> /tmp/8eddbb93-2199-40a8-bec8-a11d0b7deb32.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema BACSI") >> /tmp/84fb7e04-a99b-4416-9af1-c7c7d40edc7f.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM BACSI") >> /tmp/f6faa8e9-fa1b-4704-a083-3800f3ac3a55.log 2>&1
(python3 -c "import os; print(os.path.join(os.path.dirname(os.path.abspath('/home/huong/nhakhoaso/config.py')), 'database', 'nhakhoaso.db'))") >> /tmp/5598fb19-f6cc-4e84-8733-5a07185ee469.log 2>&1
(ls -la /home/huong/nhakhoaso/database/nhakhoaso.db) >> /tmp/8f9f8a3d-cc51-4492-9600-5e87ffdfa642.log 2>&1
(cd /home/huong && python3 -c "import sqlite3; conn = sqlite3.connect('nhakhoaso/database/nhakhoaso.db'); cursor = conn.cursor(); cursor.execute('SELECT * FROM BACSI'); print(cursor.fetchall()); conn.close()") >> /tmp/f136f639-6739-4806-a280-6f905069c07b.log 2>&1
(cd /home/huong && python3 -c "from nhakhoaso.database.bac_si import get_all_bac_si; print(get_all_bac_si())") >> /tmp/73062a9b-1235-4729-8ae5-6cfb4f51bf3e.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema PHIEUKHAM") >> /tmp/c9b11345-5254-4dcc-8a79-07a6eab31bc5.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM PHIEUKHAM") >> /tmp/4b500230-2678-460d-86b7-7a8564e8585d.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/0d4d3b67-5732-444b-ab59-e352896b8c50.log 2>&1
(ls -la /home/huong/nhakhoaso/) >> /tmp/9a371776-c27d-4224-9344-68a2de7cb8f9.log 2>&1
(grep -n "from database.db" /home/huong/nhakhoaso/app.py) >> /tmp/50741c1c-c975-4987-9686-63e494893fd7.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/ecdf7afb-faa1-47bd-89d4-7e41fa57d7a3.log 2>&1
(cat /home/huong/nhakhoaso/database/phieu_kham.py) >> /tmp/37ff586e-8c26-4655-82a4-2e03f27b558e.log 2>&1
(rm /home/huong/nhakhoaso/database/phieu_kham.py) >> /tmp/70e0e63e-acec-4324-a64e-b07624d5d932.log 2>&1
cd nhakhoaso
flask run
(cd /home/huong/qtcsdl && mysql -u root -phuong24052005 -e "USE QuanLyGiaSu; SHOW TABLES;") >> /tmp/0f0d2aa9-faed-4a95-a8e9-66982e639ce1.log 2>&1
cd qtcsdl
docker start mysql-container
flask run
flaks run
flask run
(cd /home/huong && mysql -u root -e "USE qtcsdl; DESCRIBE GIASU;") >> /tmp/318d6fe2-90cf-4d2a-823e-f9a7d2541980.log 2>&1
(cd /home/huong && grep -r "CREATE TABLE.*GIASU" --include="*.sql" .) >> /tmp/6cf281a9-16cc-49f5-b905-58d7ab3186a2.log 2>&1
(cd /home/huong && find qtcsdl/templates -name "*gs*.html") >> /tmp/c4b119fa-38ca-42ed-89f0-090badec7297.log 2>&1
(cd /home/huong/qtcsdl && python app.py) >> /tmp/436b72d8-5120-4aa8-8f74-9dbc281a0204.log 2>&1
(cd /home/huong/qtcsdl && python3 app.py) >> /tmp/200dd17a-865b-48b8-addc-f686be9d566d.log 2>&1
(cd /home/huong/qtcsdl && grep -n "@app.route(\"/them_gs" app.py) >> /tmp/bc29bf14-2907-4be4-8ac5-022f2fd10b59.log 2>&1
(mysql -u root -phuong24052005 -e "USE QuanLyGiaSu; DESCRIBE GIAODICH;") >> /tmp/3628200e-134d-4c87-a2cc-536342b840d5.log 2>&1
(cd /home/huong && python -m qtcsdl.app) >> /tmp/4efe2691-53d0-4ece-b3cf-6ab27cac61af.log 2>&1
(cd /home/huong && python3 -m qtcsdl.app) >> /tmp/78be2839-8f0d-42a4-a3db-3005f438c6a1.log 2>&1
(cd /home/huong && python3 -m qtcsdl.app) >> /tmp/628e231b-c8a8-41ad-bbd1-011a6e5c25a2.log 2>&1
(cd /home/huong && grep -n "@app.route(\"/qlgd\")" qtcsdl/app.py) >> /tmp/78cf9d18-ae51-4f3f-8152-993f3736b06b.log 2>&1
(cd /home/huong && grep -n "def create_users_table" qtcsdl/help.py) >> /tmp/d660b178-8f76-4f6d-bb0b-a153e3fc7e35.log 2>&1
(cd /home/huong && python3 -m qtcsdl.app) >> /tmp/2a02d34b-abf8-4519-9fd2-60af6482e0b4.log 2>&1
(cd /home/huong && python3 -m qtcsdl.app) >> /tmp/02bd5228-4dbe-4209-980b-0cb87153a17e.log 2>&1
(cd /home/huong && python3 -c "from qtcsdl.help import get_connection; conn = get_connection(); cursor = conn.cursor(dictionary=True); cursor.execute('SELECT * FROM GIAODICH LIMIT 5'); result = cursor.fetchall(); print(result); conn.close()") >> /tmp/43c95ebf-cd1c-49ea-a0c9-951ef1dd3394.log 2>&1
(cd /home/huong && python3 -c "from qtcsdl.help import get_connection; conn = get_connection(); cursor = conn.cursor(dictionary=True); cursor.execute('SELECT * FROM GIAODICH WHERE MaGD = %s', ('GD00001',)); result = cursor.fetchone(); print(result); conn.close()") >> /tmp/1a9d4191-790c-488d-a3b9-ea4ab5a14858.log 2>&1
(cd /home/huong && python3 -c "from flask import Flask; from qtcsdl.app import app; with app.test_client() as client: response = client.get('/sua_gd/GD00001'); print(response.status_code)") >> /tmp/6e02eb65-7d83-49f1-a17d-c6ff8e489e0e.log 2>&1
(cd /home/huong && python3 -c "from qtcsdl.help import get_connection; conn = get_connection(); cursor = conn.cursor(dictionary=True); cursor.execute('DESCRIBE GIAODICH'); result = cursor.fetchall(); print(result); conn.close()") >> /tmp/b9164065-6ebf-484b-a1c9-c5bf83f69ff4.log 2>&1
(cd /home/huong/qtcsdl && export FLASK_APP=app.py && flask run) >> /tmp/1af26941-5bed-46b5-a15c-b3031dafab8b.log 2>&1
cd qtcsdl
docker exec -it my sql-container mysql -u root -p
docker exec -it mysql-container mysql -u root -p
docker stop mysql-contaner
docker stop mysql-container
cd qtcsdl
docker start mysql-continer
docker start mysql-container
flask run
(cd /home/huong/qtcsdl && python3 app.py) >> /tmp/ac2f5ca4-0226-4158-9fa4-242b820eef86.log 2>&1
(systemctl status mysql) >> /tmp/9a8d292b-3e9e-4a35-98ce-2061eb9bcf37.log 2>&1
(systemctl status mysqld) >> /tmp/7075a197-c65c-4e5b-8fe5-dfa197c557e0.log 2>&1
(which mysql) >> /tmp/46556c24-b2c5-4c85-80d2-4840e8a3b156.log 2>&1
cd qtcsdl
flask run
cd qtcsdl
docker exec -it mysql-container -u root -p
docker exec -it mysql-container mysql -u root -p
cd qtcsdl
flask run
cd qtcsdl
docker start mysql-container
docker stop mysql-container
(find /home/huong/nhakhoaso -name "setup.py") >> /tmp/ad04727b-028e-4583-a061-af6afe8bc23b.log 2>&1
(grep -n "from nhakhoaso" /home/huong/nhakhoaso/app.py) >> /tmp/5ae5ae46-4e89-414e-8289-a81407dcb652.log 2>&1
(grep -n "nhakhoaso" /home/huong/nhakhoaso/app.py) >> /tmp/42fd578e-8aad-46c8-80be-6c3d849fc072.log 2>&1
(cd /home/huong/nhakhoaso && python -m flask run) >> /tmp/68a7e3b6-70b0-454a-8bc3-262479612b08.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run) >> /tmp/f91796c5-3556-433c-abd7-12e3ed9706f0.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run) >> /tmp/b2629560-afbf-4305-bea2-a33aab90dd21.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run) >> /tmp/1144847c-9e44-4b48-a457-4c93d2bbeab1.log 2>&1
(find /home/huong/nhakhoaso -name "*thanh_toan*" -o -name "*hoa_don*") >> /tmp/73d92636-ba54-4185-8404-714a0de2e9b5.log 2>&1
(grep -n "thanh_toan\|hoa_don\|HOADON" /home/huong/nhakhoaso/app.py) >> /tmp/e764c5f9-5ef4-4355-905b-35c65aec48fe.log 2>&1
(grep -n "HOADON" /home/huong/nhakhoaso/database/init_db.sql) >> /tmp/049bc019-f991-4feb-8f23-1eedbcd04736.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('SELECT name FROM sqlite_master WHERE type=\"table\" AND name=\"HOADON\"', fetch=True))") >> /tmp/7a3569e1-0c6f-4bb3-994a-26790c598e5f.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('PRAGMA table_info(HOADON)', fetch=True))") >> /tmp/87cb8b22-d723-491a-ba0c-a27894182856.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('SELECT * FROM HOADON', fetch=True))") >> /tmp/f46e3871-a987-4bca-9a67-d7b3a1bcb12b.log 2>&1
(grep -n -A 5 -B 5 "thanh_toan" /home/huong/nhakhoaso/app.py) >> /tmp/bd1e2926-ce0f-4096-a204-40030d9a3d32.log 2>&1
(grep -n -A 5 -B 5 "so_hoa_don" /home/huong/nhakhoaso/app.py) >> /tmp/124544ea-e24c-40dd-973c-dfbaa01ecc8b.log 2>&1
(rm /home/huong/nhakhoaso/database/hoa_don.py) >> /tmp/fa84f885-be1e-4e17-9988-81af7fd4a5b8.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; execute_query('DROP TABLE IF EXISTS HOADON')") >> /tmp/a0d3d4b2-7519-44eb-a92a-ff6a11109143.log 2>&1
(rm /home/huong/nhakhoaso/templates/thanh_toan_new.html) >> /tmp/2d64002a-6bc0-4ad7-9862-4779a85b0b04.log 2>&1
(grep -n "thanh-toan\|thanh_toan" /home/huong/nhakhoaso/templates/sidebar.html) >> /tmp/1fcd6fd1-1de8-4380-b5b5-91076f11d33a.log 2>&1
(grep -n "hoa_don\|thanh_toan" /home/huong/nhakhoaso/templates/bao_cao*.html) >> /tmp/e1adecb4-69e6-4534-ad91-82b77e365e88.log 2>&1
(grep -n "tong_hoa_don\|SoHoaDon\|SoLuongHoaDon" /home/huong/nhakhoaso/app.py) >> /tmp/303f6048-fa05-4b1f-9eeb-e0f19d91e9bc.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from database.db import execute_query; print(execute_query('SELECT name FROM sqlite_master WHERE type=\"table\" AND name=\"HOADON\"', fetch=True))") >> /tmp/aeb0cbd9-be61-4c5a-a0c5-9aa43dba900b.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run) >> /tmp/acb51c73-32f1-4e04-b267-d176693d41f1.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run) >> /tmp/bbaa675d-f9e7-451a-84b0-0500dbe7a039.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --port=5001) >> /tmp/65c5f0d0-0061-42e2-bb85-7ce41ce5364f.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --port=5001) >> /tmp/222db647-a18a-4beb-8876-bdbb6923b5fc.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --port=5001) >> /tmp/61d43116-67bf-4354-a3ad-70bf54452975.log 2>&1
(cd /home/huong/nhakhoaso && python3 -c "from flask import Flask; app = Flask(__name__); with app.test_request_context(): from app import tim_kiem_lich_hen; tim_kiem_lich_hen()") >> /tmp/948b45ef-cd55-42a6-8ac1-468b1d5f2884.log 2>&1
(cd /home/huong/nhakhoaso && python3 -m flask run --port=5001) >> /tmp/faa68355-219e-46c9-9e59-bbae4992b9c0.log 2>&1
cd nhakhoaso
flsk run
flask run
(ls -la /home/huong/nhakhoaso/database/) >> /tmp/89a28176-1f64-466d-887b-d3e04bdaf975.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".tables") >> /tmp/9d008e0d-e8b6-4f61-95d9-de3bc38daa63.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db ".schema DICHVU") >> /tmp/8c9d4bc4-b389-461e-8536-d2973d265d85.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM DICHVU LIMIT 5;") >> /tmp/8fa59b12-ceea-4563-8f64-1eb52b3c54bb.log 2>&1
(cd /home/huong && python -m nhakhoaso.app) >> /tmp/09d0e37b-99a1-439f-914d-fa0a508202a7.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/e33741c6-3ac1-4257-86a0-f9a2c7006bd2.log 2>&1
(ls -la /home/huong/nhakhoaso) >> /tmp/eaec3b75-74ab-4c72-927d-70c984873e43.log 2>&1
(ls -la /home/huong/nhakhoaso/__init__.py) >> /tmp/b064f09e-0f71-40cc-921c-156fabe51bfe.log 2>&1
(grep -n "from database" /home/huong/nhakhoaso/app.py) >> /tmp/31535318-bd88-41d5-bcd4-95acab295183.log 2>&1
(ls -la /home/huong/nhakhoaso/database/__init__.py) >> /tmp/ddeee93e-6fdf-46f2-b06e-029363002ec0.log 2>&1
(grep -n "/api/dich-vu" /home/huong/nhakhoaso/app.py) >> /tmp/02bdc622-74bd-4ee0-92d2-2268dd6dbe8f.log 2>&1
(grep -n "def chi_tiet_dich_vu" /home/huong/nhakhoaso/app.py) >> /tmp/5b8d9a20-64d2-44e8-a70b-317956956fe3.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/81fcc6e0-8bb0-4069-aa82-c4d8e595eb79.log 2>&1
(grep -n "{% block" /home/huong/nhakhoaso/templates/tim_kiem_dich_vu.html) >> /tmp/2df74d25-06cf-48ef-b9d6-f7501054bf71.log 2>&1
(grep -n "{% endblock" /home/huong/nhakhoaso/templates/tim_kiem_dich_vu.html) >> /tmp/121a51d4-e1c4-4446-9170-a896b2a37ff8.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/fdb31ce1-7d63-4df4-9c90-54e4083e56e3.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/3484b212-4ced-4c72-a613-643867c790af.log 2>&1
(grep -n "{% block" /home/huong/nhakhoaso/templates/chi_tiet_dich_vu.html) >> /tmp/34c04cd1-b85a-49fe-9860-3151c2081279.log 2>&1
(grep -n "{% endblock" /home/huong/nhakhoaso/templates/chi_tiet_dich_vu.html) >> /tmp/f8b45d14-beb9-43f1-8ee9-1e03ca1438c0.log 2>&1
(cd /home/huong && python3 -m nhakhoaso.app) >> /tmp/a6d8181a-bfc7-421c-9916-747fcba0f8fe.log 2>&1
(ls -la /home/huong/nhakhoaso/database/nhakhoaso.db) >> /tmp/1db7a28c-14dc-4bef-b489-89827abd04bc.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db .tables) >> /tmp/2a11dfeb-01cb-4ed5-b197-ecc2fa79b1ee.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM DICHVU LIMIT 5;") >> /tmp/8aa98b59-0ad9-4c3b-9bbd-d31bc4cb475e.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM PHIEUKHAM LIMIT 5;") >> /tmp/8f6c41ec-ff20-42fb-a4f2-44fb06263540.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM BENHNHAN LIMIT 5;") >> /tmp/87ee8fb5-72d3-4bb2-9ca9-1a3cfbc9c25b.log 2>&1
(sqlite3 /home/huong/nhakhoaso/database/nhakhoaso.db "SELECT * FROM BACSI LIMIT 5;") >> /tmp/17828f24-089c-4cc5-92aa-70c1b6cff868.log 2>&1
(grep -n "from nhakhoaso.database.db" /home/huong/nhakhoaso/app.py) >> /tmp/1cbd5c19-0200-49ba-9f7a-3cf43e91daca.log 2>&1
(cd /home/huong/nhakhoaso && export FLASK_APP=app.py && flask run) >> /tmp/775ef751-4cae-44b1-9942-b85891582b93.log 2>&1
(grep -n "bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/697f4d12-1b29-4d45-9e38-76138031b314.log 2>&1
(grep -n "@app.route('/bao-cao" /home/huong/nhakhoaso/app.py) >> /tmp/b8af4d03-f32c-4609-b16d-f8b771816a7d.log 2>&1
(ls -la /home/huong/nhakhoaso/templates/bao_cao*) >> /tmp/186aa031-4297-47dc-91f0-5321b636a067.log 2>&1
(cd /home/huong && ls -la nhakhoaso/database/) >> /tmp/66d6fd89-4227-47e3-91da-13b597ce76fd.log 2>&1
(cd /home/huong && sqlite3 nhakhoaso/database/nhakhoaso.db ".schema PHIEUKHAM") >> /tmp/637f2c78-89d8-421c-9338-6772daeaf9b7.log 2>&1
(cd /home/huong && sqlite3 nhakhoaso/database/nhakhoaso.db ".tables") >> /tmp/90e757d1-49e0-4783-963e-fc6ed407a953.log 2>&1
(cd /home/huong && sqlite3 nhakhoaso/database/nhakhoaso.db "SELECT name FROM sqlite_master WHERE type='table' AND name='HOADON';") >> /tmp/feec1021-f8f6-44b9-9046-d2857a05488d.log 2>&1
(cd /home/huong && sqlite3 nhakhoaso/database/nhakhoaso.db "PRAGMA table_info(PHIEUKHAM);") >> /tmp/cd1cf2c0-ee19-4789-9839-27524f34491b.log 2>&1
cd nhakhoasso
cdnhakhoaso
cd nhakhoaso
flask run
cd nhakhoaso
flask run
cd nhakhoaso
cd database
sqlite3 nhakhoaso.db
(grep -n "bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/54a7723f-8e6c-4e79-94c3-e1ea8dbfe9ee.log 2>&1
(grep -n "bao-cao" /home/huong/nhakhoaso/app.py) >> /tmp/e5d7822b-0520-4945-972b-3ea90e34ec1c.log 2>&1
(grep -n "def bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/784e43f3-ac14-4ea6-bd7b-2606b0946fb4.log 2>&1
(grep -n "bao_cao_" /home/huong/nhakhoaso/app.py) >> /tmp/93baf6c8-c84e-4aaf-9f7c-af444a458fac.log 2>&1
(grep -n "@app.route" /home/huong/nhakhoaso/app.py | grep -i "bao") >> /tmp/2930ae24-80c0-4473-874f-4125991f9f8a.log 2>&1
(grep -n "@app.route('/bao" /home/huong/nhakhoaso/app.py) >> /tmp/c780bb1d-0d74-4feb-b875-2fd861703840.log 2>&1
(grep -n "def bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/a722baf0-b5e2-40d4-8fa2-412310ecd39a.log 2>&1
(grep -n "@app.route" /home/huong/nhakhoaso/app.py | head -20) >> /tmp/d0d87b20-17f5-4ee5-b0af-f723d5cf04a2.log 2>&1
(grep -n "@app.route" /home/huong/nhakhoaso/app.py | tail -20) >> /tmp/576b87b7-2c43-499f-ba49-cd10d4a59638.log 2>&1
(grep -n "@app.route" /home/huong/nhakhoaso/app.py | grep -i "bao") >> /tmp/c51b9a65-316f-4948-8e07-f1056cd491a7.log 2>&1
(grep -n "bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/846dd3dd-734e-451d-84d1-b9028c619b3e.log 2>&1
(grep -n "bao-cao" /home/huong/nhakhoaso/app.py) >> /tmp/0c7c5331-e305-4cdf-97ad-1062eb1c0eff.log 2>&1
(grep -n "report" /home/huong/nhakhoaso/app.py) >> /tmp/d32f18d4-0356-4928-aaa0-1f36d3a2f0fd.log 2>&1
(grep -n "thong-ke" /home/huong/nhakhoaso/app.py) >> /tmp/58686e70-5467-4238-bda1-b658254ea9d0.log 2>&1
(grep -n "thong_ke" /home/huong/nhakhoaso/app.py) >> /tmp/6e0338e2-e969-4eef-868c-8c6acb1e282f.log 2>&1
(grep -n "statistics" /home/huong/nhakhoaso/app.py) >> /tmp/0042c455-abc0-476f-97a5-7be9ca43218a.log 2>&1
(grep -n "get_tong_quan_bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/e7e8b61a-dba5-4e21-8170-bca3f66e77c5.log 2>&1
(grep -n "from database.bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/a95bbfac-dfcb-412b-938c-6eae7bb51091.log 2>&1
(grep -n "import" /home/huong/nhakhoaso/app.py | grep "bao_cao") >> /tmp/1eaa4c7b-b35d-4e40-a605-155a59b6df37.log 2>&1
cd qtcsdl
flask run
cd qtcsdl
docker start mysql-container
flask run
(ls -la /home/huong/nhakhoaso/templates/bao_cao*.html) >> /tmp/bfef6a98-a830-4b6f-b676-7d49b3d7cfc6.log 2>&1
(rm /home/huong/nhakhoaso/templates/bao_cao_benh_nhan.html /home/huong/nhakhoaso/templates/bao_cao_dich_vu.html /home/huong/nhakhoaso/templates/bao_cao_doanh_thu.html) >> /tmp/655bfa11-219a-401c-b692-0b79e73b47ff.log 2>&1
(rm /home/huong/nhakhoaso/templates/bao_cao_benh_nhan.html /home/huong/nhakhoaso/templates/bao_cao_dich_vu.html /home/huong/nhakhoaso/templates/bao_cao_doanh_thu.html) >> /tmp/b1964a1f-594d-40d6-bae5-260284a63fc5.log 2>&1
(ls -la /home/huong/nhakhoaso/templates/bao_cao*.html) >> /tmp/d0e30c98-8c49-413b-92bc-f62ee16adfb2.log 2>&1
(ls -la /home/huong/nhakhoaso/templates/bao_cao*.html) >> /tmp/199e9530-c285-4208-93b3-d5f80f846fcd.log 2>&1
(cat > /home/huong/nhakhoaso/database/bao_cao.py << 'EOF'
import sqlite3
import json
from datetime import datetime, timedelta
import calendar

def get_connection():
    conn = sqlite3.connect('nhakhoaso.db')
    conn.row_factory = sqlite3.Row
    return conn

def get_bao_cao_luot_kham(tu_ngay=None, den_ngay=None, loai_bao_cao='day'):
    """Lấy dữ liệu báo cáo lượt khám"""
    conn = get_connection()
    cursor = conn.cursor()
    
    # Nếu không có ngày, lấy dữ liệu của tháng hiện tại
    if not tu_ngay or not den_ngay:
        today = datetime.now()
        first_day = datetime(today.year, today.month, 1).strftime('%Y-%m-%d')
        last_day = datetime(today.year, today.month, calendar.monthrange(today.year, today.month)[1]).strftime('%Y-%m-%d')
        tu_ngay = first_day
        den_ngay = last_day
    
    # Lấy tổng số lượt khám
    cursor.execute("""
        SELECT COUNT(*) as tong_luot_kham
        FROM PHIEUKHAM
        WHERE NgayKham BETWEEN ? AND ?
    """, (tu_ngay, den_ngay))
    
    tong_luot_kham = cursor.fetchone()['tong_luot_kham']
    
    # Tính số lượt khám trung bình mỗi ngày
    start_date = datetime.strptime(tu_ngay, '%Y-%m-%d')
    end_date = datetime.strptime(den_ngay, '%Y-%m-%d')
    so_ngay = (end_date - start_date).days + 1
    
    luot_kham_trung_binh = 0
    if so_ngay > 0:
        luot_kham_trung_binh = tong_luot_kham / so_ngay
    
    # Lấy ngày có nhiều lượt khám nhất
    cursor.execute("""
        SELECT NgayKham, COUNT(*) as so_luot
        FROM PHIEUKHAM
        WHERE NgayKham BETWEEN ? AND ?
        GROUP BY NgayKham
        ORDER BY so_luot DESC
        LIMIT 1
    """, (tu_ngay, den_ngay))
    
    result = cursor.fetchone()
    ngay_nhieu_nhat = result['NgayKham'] if result else "Không có dữ liệu"
    so_luot_nhieu_nhat = result['so_luot'] if result else 0
    
    # Lấy dữ liệu lượt khám theo thời gian
    luot_kham_theo_thoi_gian = []
    thoi_gian_labels = []
    luot_kham_data = []
    
    if loai_bao_cao == 'day':  # Theo ngày
        current_date = start_date
        while current_date <= end_date:
            date_str = current_date.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong ngày
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham = ?
            """, (date_str,))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': current_date.strftime('%d/%m/%Y'),
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(current_date.strftime('%d/%m'))
            luot_kham_data.append(so_luot)
            
            current_date += timedelta(days=1)
    
    elif loai_bao_cao == 'week':  # Theo tuần
        current_date = start_date
        week_num = 1
        
        while current_date <= end_date:
            week_end = min(current_date + timedelta(days=6), end_date)
            week_start_str = current_date.strftime('%Y-%m-%d')
            week_end_str = week_end.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong tuần
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham BETWEEN ? AND ?
            """, (week_start_str, week_end_str))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': f"Tuần {week_num} ({current_date.strftime('%d/%m')} - {week_end.strftime('%d/%m')})",
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(f"Tuần {week_num}")
            luot_kham_data.append(so_luot)
            
            current_date = week_end + timedelta(days=1)
            week_num += 1
    
    elif loai_bao_cao == 'month':  # Theo tháng
        # Lấy tháng đầu tiên và tháng cuối cùng
        start_year = start_date.year
        start_month = start_date.month
        end_year = end_date.year
        end_month = end_date.month
        
        current_year = start_year
        current_month = start_month
        
        while (current_year < end_year) or (current_year == end_year and current_month <= end_month):
            # Lấy ngày đầu tiên và cuối cùng của tháng
            first_day = datetime(current_year, current_month, 1)
            last_day = datetime(current_year, current_month, calendar.monthrange(current_year, current_month)[1])
            
            # Điều chỉnh nếu nằm ngoài khoảng thời gian
            if first_day < start_date:
                first_day = start_date
            if last_day > end_date:
                last_day = end_date
            
            first_day_str = first_day.strftime('%Y-%m-%d')
            last_day_str = last_day.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong tháng
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham BETWEEN ? AND ?
            """, (first_day_str, last_day_str))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': f"Tháng {current_month}/{current_year}",
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(f"T{current_month}/{current_year}")
            luot_kham_data.append(so_luot)
            
            # Tăng tháng
            if current_month == 12:
                current_month = 1
                current_year += 1
            else:
                current_month += 1
    
    # Lấy số lượt khám theo bác sĩ
    cursor.execute("""
        SELECT bs.MaBS, bs.HoTen, COUNT(pk.MaPK) as SoLuot
        FROM BACSI bs
        LEFT JOIN PHIEUKHAM pk ON bs.MaBS = pk.MaBS
        WHERE pk.NgayKham BETWEEN ? AND ?
        GROUP BY bs.MaBS
        ORDER BY SoLuot DESC
    """, (tu_ngay, den_ngay))
    
    luot_kham_theo_bac_si = []
    bac_si_labels = []
    bac_si_data = []
    
    for row in cursor.fetchall():
        so_luot = row['SoLuot'] if row['SoLuot'] else 0
        
        luot_kham_theo_bac_si.append({
            'MaBS': row['MaBS'],
            'HoTen': row['HoTen'],
            'SoLuot': so_luot
        })
        
        bac_si_labels.append(row['HoTen'])
        bac_si_data.append(so_luot)
    
    # Lấy số lượt khám theo dịch vụ
    cursor.execute("""
        SELECT dv.MaDV, dv.TenDV, COUNT(pk.MaPK) as SoLuot
        FROM DICHVU dv
        LEFT JOIN PHIEUKHAM pk ON dv.MaDV = pk.MaDV
        WHERE pk.NgayKham BETWEEN ? AND ?
        GROUP BY dv.MaDV
        ORDER BY SoLuot DESC
    """, (tu_ngay, den_ngay))
    
    luot_kham_theo_dich_vu = []
    dich_vu_labels = []
    dich_vu_data = []
    
    for row in cursor.fetchall():
        so_luot = row['SoLuot'] if row['SoLuot'] else 0
        
        luot_kham_theo_dich_vu.append({
            'MaDV': row['MaDV'],
            'TenDV': row['TenDV'],
            'SoLuot': so_luot
        })
        
        dich_vu_labels.append(row['TenDV'])
        dich_vu_data.append(so_luot)
    
    conn.close()
    
    return {
        'tu_ngay': tu_ngay,
        'den_ngay': den_ngay,
        'loai_bao_cao': loai_bao_cao,
        'tong_luot_kham': tong_luot_kham,
        'luot_kham_trung_binh': luot_kham_trung_binh,
        'ngay_nhieu_nhat': ngay_nhieu_nhat,
        'so_luot_nhieu_nhat': so_luot_nhieu_nhat,
        'luot_kham_theo_thoi_gian': luot_kham_theo_thoi_gian,
        'luot_kham_theo_bac_si': luot_kham_theo_bac_si,
        'luot_kham_theo_dich_vu': luot_kham_theo_dich_vu,
        'thoi_gian_labels': json.dumps(thoi_gian_labels),
        'luot_kham_data': json.dumps(luot_kham_data),
        'bac_si_labels': json.dumps(bac_si_labels),
        'bac_si_data': json.dumps(bac_si_data),
        'dich_vu_labels': json.dumps(dich_vu_labels),
        'dich_vu_data': json.dumps(dich_vu_data)
    }
EOF) >> /tmp/a5a71959-64d0-44f3-8c3f-f67d74bb0313.log 2>&1

(cat > /home/huong/nhakhoaso/database/bao_cao.py << 'EOF'
import sqlite3
import json
from datetime import datetime, timedelta
import calendar

def get_connection():
    conn = sqlite3.connect('nhakhoaso.db')
    conn.row_factory = sqlite3.Row
    return conn

def get_bao_cao_luot_kham(tu_ngay=None, den_ngay=None, loai_bao_cao='day'):
    """Lấy dữ liệu báo cáo lượt khám"""
    conn = get_connection()
    cursor = conn.cursor()
    
    # Nếu không có ngày, lấy dữ liệu của tháng hiện tại
    if not tu_ngay or not den_ngay:
        today = datetime.now()
        first_day = datetime(today.year, today.month, 1).strftime('%Y-%m-%d')
        last_day = datetime(today.year, today.month, calendar.monthrange(today.year, today.month)[1]).strftime('%Y-%m-%d')
        tu_ngay = first_day
        den_ngay = last_day
    
    # Lấy tổng số lượt khám
    cursor.execute("""
        SELECT COUNT(*) as tong_luot_kham
        FROM PHIEUKHAM
        WHERE NgayKham BETWEEN ? AND ?
    """, (tu_ngay, den_ngay))
    
    tong_luot_kham = cursor.fetchone()['tong_luot_kham']
    
    # Tính số lượt khám trung bình mỗi ngày
    start_date = datetime.strptime(tu_ngay, '%Y-%m-%d')
    end_date = datetime.strptime(den_ngay, '%Y-%m-%d')
    so_ngay = (end_date - start_date).days + 1
    
    luot_kham_trung_binh = 0
    if so_ngay > 0:
        luot_kham_trung_binh = tong_luot_kham / so_ngay
    
    # Lấy ngày có nhiều lượt khám nhất
    cursor.execute("""
        SELECT NgayKham, COUNT(*) as so_luot
        FROM PHIEUKHAM
        WHERE NgayKham BETWEEN ? AND ?
        GROUP BY NgayKham
        ORDER BY so_luot DESC
        LIMIT 1
    """, (tu_ngay, den_ngay))
    
    result = cursor.fetchone()
    ngay_nhieu_nhat = result['NgayKham'] if result else "Không có dữ liệu"
    so_luot_nhieu_nhat = result['so_luot'] if result else 0
    
    # Lấy dữ liệu lượt khám theo thời gian
    luot_kham_theo_thoi_gian = []
    thoi_gian_labels = []
    luot_kham_data = []
    
    if loai_bao_cao == 'day':  # Theo ngày
        current_date = start_date
        while current_date <= end_date:
            date_str = current_date.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong ngày
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham = ?
            """, (date_str,))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': current_date.strftime('%d/%m/%Y'),
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(current_date.strftime('%d/%m'))
            luot_kham_data.append(so_luot)
            
            current_date += timedelta(days=1)
    
    elif loai_bao_cao == 'week':  # Theo tuần
        current_date = start_date
        week_num = 1
        
        while current_date <= end_date:
            week_end = min(current_date + timedelta(days=6), end_date)
            week_start_str = current_date.strftime('%Y-%m-%d')
            week_end_str = week_end.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong tuần
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham BETWEEN ? AND ?
            """, (week_start_str, week_end_str))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': f"Tuần {week_num} ({current_date.strftime('%d/%m')} - {week_end.strftime('%d/%m')})",
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(f"Tuần {week_num}")
            luot_kham_data.append(so_luot)
            
            current_date = week_end + timedelta(days=1)
            week_num += 1
    
    elif loai_bao_cao == 'month':  # Theo tháng
        # Lấy tháng đầu tiên và tháng cuối cùng
        start_year = start_date.year
        start_month = start_date.month
        end_year = end_date.year
        end_month = end_date.month
        
        current_year = start_year
        current_month = start_month
        
        while (current_year < end_year) or (current_year == end_year and current_month <= end_month):
            # Lấy ngày đầu tiên và cuối cùng của tháng
            first_day = datetime(current_year, current_month, 1)
            last_day = datetime(current_year, current_month, calendar.monthrange(current_year, current_month)[1])
            
            # Điều chỉnh nếu nằm ngoài khoảng thời gian
            if first_day < start_date:
                first_day = start_date
            if last_day > end_date:
                last_day = end_date
            
            first_day_str = first_day.strftime('%Y-%m-%d')
            last_day_str = last_day.strftime('%Y-%m-%d')
            
            # Lấy số lượt khám trong tháng
            cursor.execute("""
                SELECT COUNT(*) as so_luot
                FROM PHIEUKHAM
                WHERE NgayKham BETWEEN ? AND ?
            """, (first_day_str, last_day_str))
            
            so_luot = cursor.fetchone()['so_luot']
            
            luot_kham_theo_thoi_gian.append({
                'ThoiGian': f"Tháng {current_month}/{current_year}",
                'SoLuot': so_luot
            })
            
            thoi_gian_labels.append(f"T{current_month}/{current_year}")
            luot_kham_data.append(so_luot)
            
            # Tăng tháng
            current_month += 1
            if current_month > 12:
                current_month = 1
                current_year += 1
    
    # Lấy số lượt khám theo bác sĩ
    cursor.execute("""
        SELECT bs.MaBS, bs.HoTen, COUNT(pk.MaBS) as so_luot
        FROM BACSI bs
        LEFT JOIN PHIEUKHAM pk ON bs.MaBS = pk.MaBS
        WHERE pk.NgayKham BETWEEN ? AND ?
        GROUP BY bs.MaBS
        ORDER BY so_luot DESC
    """, (tu_ngay, den_ngay))
    
    luot_kham_theo_bac_si = []
    bac_si_labels = []
    bac_si_data = []
    
    for row in cursor.fetchall():
        luot_kham_theo_bac_si.append({
            'MaBS': row['MaBS'],
            'HoTen': row['HoTen'],
            'SoLuot': row['so_luot']
        })
        
        bac_si_labels.append(row['HoTen'])
        bac_si_data.append(row['so_luot'])
    
    # Lấy số lượt khám theo dịch vụ
    cursor.execute("""
        SELECT dv.MaDV, dv.TenDV, COUNT(pk.MaDV) as so_luot
        FROM DICHVU dv
        LEFT JOIN PHIEUKHAM pk ON dv.MaDV = pk.MaDV
        WHERE pk.NgayKham BETWEEN ? AND ?
        GROUP BY dv.MaDV
        ORDER BY so_luot DESC
    """, (tu_ngay, den_ngay))
    
    luot_kham_theo_dich_vu = []
    dich_vu_labels = []
    dich_vu_data = []
    
    for row in cursor.fetchall():
        luot_kham_theo_dich_vu.append({
            'MaDV': row['MaDV'],
            'TenDV': row['TenDV'],
            'SoLuot': row['so_luot']
        })
        
        dich_vu_labels.append(row['TenDV'])
        dich_vu_data.append(row['so_luot'])
    
    conn.close()
    
    return {
        'tu_ngay': tu_ngay,
        'den_ngay': den_ngay,
        'loai_bao_cao': loai_bao_cao,
        'tong_luot_kham': tong_luot_kham,
        'luot_kham_trung_binh': luot_kham_trung_binh,
        'ngay_nhieu_nhat': ngay_nhieu_nhat,
        'so_luot_nhieu_nhat': so_luot_nhieu_nhat,
        'luot_kham_theo_thoi_gian': luot_kham_theo_thoi_gian,
        'luot_kham_theo_bac_si': luot_kham_theo_bac_si,
        'luot_kham_theo_dich_vu': luot_kham_theo_dich_vu,
        'thoi_gian_labels': json.dumps(thoi_gian_labels),
        'luot_kham_data': json.dumps(luot_kham_data),
        'bac_si_labels': json.dumps(bac_si_labels),
        'bac_si_data': json.dumps(bac_si_data),
        'dich_vu_labels': json.dumps(dich_vu_labels),
        'dich_vu_data': json.dumps(dich_vu_data)
    }
EOF) >> /tmp/6983d33d-a05a-4532-8dfb-a0c2e369c6c1.log 2>&1

(ls -la /home/huong/nhakhoaso/app.py) >> /tmp/d998370f-a919-4a95-83bd-525ff495286e.log 2>&1
(grep -n "def bao_cao" /home/huong/nhakhoaso/app.py) >> /tmp/47ad7b60-174f-43eb-baf0-70ccbd8e890b.log 2>&1
(grep -n "@app.route('/bao-cao" /home/huong/nhakhoaso/app.py) >> /tmp/ee03a92c-363a-42e2-90ad-2348f5166d31.log 2>&1
(grep -n "from database.bao_cao import" /home/huong/nhakhoaso/app.py) >> /tmp/da1d9e25-27a4-48fe-b197-ed889434d4a2.log 2>&1
(grep -n "url_for('bao_cao" /home/huong/nhakhoaso/templates/*.html) >> /tmp/e007660c-9080-4fe0-a137-8877210969ec.log 2>&1
(grep -n "url_for('bao_cao_" /home/huong/nhakhoaso/templates/*.html) >> /tmp/51f8a1a5-791b-4bfa-b38f-57ea7b98bb98.log 2>&1
(cd /home/huong && python3 nhakhoaso/app.py) >> /tmp/a2d5f887-cfc0-455c-8ee5-09aac1ca4062.log 2>&1
cd nhakhoaso
flask run
cd qtcsdl
cd ..
cd nhakhoaso
flask run
cd nhakhoaso
flask run
cd ..
cd qtcsdl
flask run
docker start mysql-container
flaks run
flask run
